<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GridForge App</title>
  <meta name="description" content="Compose and refine professional outreach." />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav class="navbar">
    <div class="container inner">
      <div class="nav-logo">Grid<strong><span>Forge</span></strong></div>
      <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="process.html">How it Works</a>
        <a href="faq.html">FAQ</a>
      </div>
    </div>
  </nav>

  <header class="hero" style="padding:80px 20px 32px;">
    <h1>Compose with clarity and control</h1>
    <p>Provide the essentials—business, recipient, objective—and generate a concise, professional draft.</p>
  </header>

  <main class="container section" style="padding-top:20px;">
    <div class="card">
      <form id="composer" onsubmit="return false;">
        <label>Business name
          <input id="businessName" type="text" placeholder="Acme Robotics" required />
        </label>
        <label>Sender name
          <input id="senderName" type="text" placeholder="Alex Chen" required />
        </label>
        <label>Recipient name
          <input id="recipientName" type="text" placeholder="Jordan Patel" required />
        </label>
        <label>Industry
          <input id="industry" type="text" placeholder="Manufacturing automation" />
        </label>
        <label>Objective
          <input id="goals" type="text" placeholder="Intro call about deploying robotics in packaging" />
        </label>
        <label>Message type
          <select id="messageType">
            <option value="email">Email</option>
            <option value="linkedin">LinkedIn DM</option>
            <option value="followup">Follow-up</option>
            <option value="inbound-reply">Inbound reply</option>
          </select>
        </label>
        <label>Additional context
          <textarea id="extra" placeholder="Relevant details, timing, references, constraints"></textarea>
        </label>

        <div class="hero-buttons" style="margin-top:6px;">
          <button class="btn-primary" id="generateBtn">Generate</button>
          <button class="btn-secondary" id="clearBtn" type="button">Clear</button>
        </div>
      </form>
    </div>

    <div class="card" style="margin-top:22px;">
      <h3 style="margin-bottom:10px;">Draft</h3>
      <textarea id="output" placeholder="Your draft will appear here…" readonly></textarea>
    </div>
  </main>

  <footer>
    <div class="container">© <span id="year"></span> GridForge.</div>
  </footer>

  <script src="script.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    const $ = id => document.getElementById(id);

    $('generateBtn').addEventListener('click', async () => {
      const payload = {
        businessName: $('businessName').value.trim(),
        senderName: $('senderName').value.trim(),
        recipientName: $('recipientName').value.trim(),
        industry: $('industry').value.trim(),
        goals: $('goals').value.trim(),
        messageType: $('messageType').value,
        extra: $('extra').value.trim()
      };
      if (!payload.businessName || !payload.senderName || !payload.recipientName) return;

      $('output').value = 'Generating…';
      try {
        const res = await fetch('/api/generate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        const data = await res.json();
        $('output').value = data.message || 'No content returned.';
      } catch {
        $('output').value = 'Error generating content. Please try again.';
      }
    });

    $('clearBtn').addEventListener('click', () => {
      ['businessName','senderName','recipientName','industry','goals','extra'].forEach(id => $(id).value='');
      $('messageType').value = 'email';
      $('output').value = '';
    });
  </script>
</body>
</html>
